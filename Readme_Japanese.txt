1:このアプリについて
2:インストール
3:BIOSの設定
4:ディレクトリ/フォルダ
5:メニューの日本語化/プレイする
6:操作
7.Q&A
8.製作者について


<1:このアプリについて>
fMSXはMarat Fayzullinによって作られたMSX/MSX2/MSX2+のエミュレーターです。
Windows, MacOS, Unix, MSDOS, AmigaOSなど様々なプラットフォームでとても高速に動作可能です。
さらに詳しい情報はこちら→ http://fms.komkon.org/fMSX/

fMSX3DSはfMSXをニンテンドー3DS（New 3DS/New 2DS/Old 3DS/Old 2DS）に移植したものです。
それに加えて、Mitsutaka Okazakiさんによる音源エミュレーション(emu2413.cなど)の最新版が追加されています。
これは多くのエミュレーターで使われている20年以上前の古いバージョンでなく、2022年の最新版です。
それに加えて、MSXTurboRやMSX0のエミュレートが追加されています。
それに加えて、最新のMSXハードウェア解析に基づく、様々な改善がなされています。
その中には、日本人の手による解析で、世界的にはまだ知られていないものも含まれます。
詳しくは"What's new japanese.txt"を読んでください。


<2.インストール>
CIAバージョン:「fMSX3DS.cia」を好きなCIAインストーラー（例えばFBI）でインストールしてください。

Homebrew Launcher:「fMSX3DS.3dsx」をSDカードの「3DS」フォルダ("root\3DS")にコピーしてください。

CIAバージョン、Homebrew LauncherバージョンのどちらでもSDカードの「3DS」フォルダ("root\3DS")に「dsp.firm」ファイルが無いと音が鳴りません。
もし無ければ、Luma3DSを使ってインストールできます。
インストールするには、Lボタンと十字キーの下とSELECTボタンを同時に押しRosalinaメニューを開きます。
そして、「Miscellaneous options」メニューを開いてその中の「Dump DSP Firmware」を選択します。


<3.BIOSの設定>
すでにMSXDSやretroarchのfMSXコア、retroarchのBlueMSXコアを使用している場合、fMSX3DSはこれらのための
BIOSファイルを直接読み込むことができるので、BIOSの設定をする必要はありません。
そうでないなら、以下のBIOSファイルをSDカードのルートまたは「FMSX3DS」フォルダ("root\FMSX3DS")にコピーします。
MSX.ROM
MSX2.ROM
MSX2EXT.ROM
MSX2P.ROM 
MSX2PEXT.ROM

加えて、できれば以下のファイルを用意します。
DISK.ROM			:デイスクのゲームをプレイするときに必要。
KANJI.ROM			:日本語の漢字を表示する。
FMPAC.ROM			:FM音源とS-RAMへのセーブに必要。
A1WXKDR.ROM			:KANJI BASICのROMです。一部のMSX2+のゲームに必要です。
				 さらにMSX2+の起動画面を表示させるのにも必要です。
「A1WXKDR.ROM」の名前は「MSXKANJI.ROM」や「KNJDRV.ROM」でもかまいません。

さらに、もしMSXTurboRを使いたいのであれば、以下のファイルを用意します。
MSXTR.ROM
MSXTREXT.ROM
MSXTROPT.ROM
MSXKANJI.ROM (A1WXKDR.ROM, KNJDRV.ROM)
MSXDOS23.ROM
MSXTRMUS.ROM

BIOSが見つからない場合は、C-BIOSが使われます。
http://cbios.sourceforge.net/
C-BIOSは某吉さんによるオープンソースのＭＳＸの互換BIOSで、様々な開発者によって改良がされてきました。
このC-BIOSでほとんどのROMカートリッジのゲームが動作しますが、MSXTurboRは動作しませんしディスクはサポートしていませんし、
MSX BASICでプログラミングすることもできません。

KANJI.ROMが見つからない場合は、A to Cさんによる疑似KANJI.ROMが使われます。
http://www.yo.rim.or.jp/~anaka/AtoC/labo/labo32.htm


<4:ディレクトリ/フォルダ>
以下のフォルダが作成されます。
/FMSX3DS/SAVEDISK		:保存されたディスク
/FMSX3DS/SNAP			:スクリーンショット画像。
/FMSX3DS/SRAM			:S-RAMセーブデータ。
/FMSX3DS/STATE			:保存されたステート。
/FMSX3DS/TAPE			:保存されたカセットテープ。


<5.プレイする>
・メニューの日本語化
　1.fMSX3DSのシステムメニューから「[Option]」を選んでオプション選択メニューに入り、
　「<3DS Option>/Menu Language」を選択。
　2.するとメニューの言語が選択できるようになるので、「Auto/自動」または「Japanese/日本語」を選択します。

・プレイする
 fMSX3DSを起動すると、ファイル選択ダイアログが表示されます。
ここで、ROMカートリッジのイメージファイルや、ディスクイメージファイル、カセットテープのファイル
を読み込めます。
fMSX3DSは以下の拡張子のファイルに対応しています。
「.ROM」、「.MX1」、「.MX2」、「.DSK」、「.CAS」
また、「.ZIP」、「.gz」の圧縮されたファイルにも対応しています。


<6.操作方法>
標準のキー設定。
A: Aボタン	B: Bボタン	X :「x」キー	Y: 「m」キー
L: F1キー	R: F2キー	Select: F5キー	ZL:コントロールキー	ZR:Graphキー
Start:fMSX3DSのメニュー
fMSX3DSのメニューの[Key Config]でこれらの設定を変えることができます。

ソフトウェアキーボード:
・3DSの下画面の画面右下端のキーボードのアイコンをタッチすることでソフトウェアキーボードが使用可能になります。

マウス：
・3DSの下画面の画面右下端のマウスのアイコンをタッチすることでマウスが使用可能になります。
下画面をタッチすることでマウスの移動ができます。LキーとRキーでマウスボタンを押すことができます。

アルカノイド　パドル:
・アルカノイド/アルカノイドIIのROMを読み込むことで自動的にアルカノイド　パドルのエミュレーションがされます。
下画面をタッチすることでパドルの移動ができます。LキーとRキーで弾を撃つことができます。


<7.特殊な周辺機器>
fMSX3DSはMSXのエミュレーターで初めて+PCMとボイスボックスとMSX0を再現します。
他にも色々な特殊な周辺機器に対応しています。
+PCM:
+PCMはADPCMの音声サンプリング機器です。
商用ゲームでこの周辺機器に対応したゲームはありませんが、日本の同人ゲームや自作ゲームでこれに対応したものが
いくつかあります。特に、注目すべきことにPleasure Hearts（ジャッジメントシルバーソードやエスカトスの作者がMSXで
出していた伝説の同人ゲーム）がこれに対応しています。
http://hp.vector.co.jp/authors/VA011751/MSXSR8-2.HTM
これを使うにはfMSX3DSのシステムメニューから「[Option]」を選んでオプション選択メニューに入り、
「<入力・出力装置の設定>/Printer Port」で「+PCM」を選択してください。

ボイスボックス:
ボイスボックスはPCMの音声サンプリング機器です。
商用ゲームでは唯一、一石にかける青春（LOG）だけが対応しています。
http://hirosedou.sblo.jp/article/93257998.html
これを使うにはfMSX3DSのシステムメニューから「[Option]」を選んでオプション選択メニューに入り、
「<入力・出力装置の設定>/プリンターポート」で「Voice Box」を選択してください。

3D立体視グラス:
MSXには3D立体視に対応したゲームやテストプログラムがいくつかあります。
たとえば、Kai MagazineのDim Xがこれに対応しています。
https://www.msxgamesworld.com/software.php?id=4752
fMSX3DSはこれをニンテンド－3DSの立体視機能で再現します。
これを使うにはまず3DSの3Dスライダーを上に上げて3DSの立体視機能を有効にします。
そして、fMSX3DSのシステムメニューから「[Option]」を選んでオプション選択メニューに入り、
「<グラフィック設定>/3D立体視」で3D立体視のモードを選択してください。
現在のバージョンでは「anaglyph 3D」と「anaglyph 3D(Color)」だけが使えます。

V9990:
同人/自作ゲームの中にはV9990やそのクローン(GFX9000など)を必要とするものがあります。
これを使うにはfMSX3DSのシステムメニューから「[オプション]」を選んでオプション選択メニューに入り、
「<エミュレーション設定>/V9990を使用する」をオンにしてください。

MSX0:
MSX0は公式に2023年にスタートしたMSXの新プロジェクトです。
https://camp-fire.jp/projects/view/648742
MSX0は様々な種類のIOTデバイスを接続でき、それをMSXを使ってコントロールすることができるものですが、
それを利用した様々な自作や同人のゲーム/アプリが作られています。
fMSX3DSでMSX0を使うには、fMSX3DSのシステムメニューから「[オプション]」を選んでオプション選択メニューに入り、
「MSX0を使用」オプションを有効にしてください。

fMSX3DSはMSXIOT ROMファイルの互換ROMを使用するので、MSXIOT ROMは必要ありません。
しかし、MSX0のアプリ/ゲームの中にはMSXべーしっ君が必要なものがあります。
すでにretroarchのBlueMSXコアを使用している場合、fMSX3DSはそのROMファイルを直接読み込むことができるので、
べーしっ君のROMファイルを用意する必要はありません。
そうでないなら、べーしっ君プラスのROMのファイル名を「MSX0_XBASIC.ROM」または「XBASIC2.rom」に変更して
それをSDカードのルートまたは「FMSX3DS」フォルダ("root\FMSX3DS")にコピーします。
そして、fMSX3DSのシステムメニューから「[オプション]」を選んでオプション選択メニューに入り、「<MSX0のオプション>/べーしっ君プラスを読み込む」
をオンにしてください。

タッチパネルを使う場合は、「MSX0を使用」オプションを有効にした状態で、3DSの下画面の画面右下端のマウスのアイコンをタッチすると
下画面にMSXの画面が表示されますが、その画面をタッチパネルとして利用できます。


<8.Q&A>
Q.fMSX3DSが動作しません！
A.「FMSX3DS」フォルダ("root\FMSX3DS")の中の「fMSX3DS.cfg」を消してみてください。
　「CMOS.ROM」を「fMSX3DS.zip」ZIPファイル内のものと入れ替えてみてください。

Q.3DSがフリーズしたんだけど…。
A.電源ボタンを10秒間押し続けてみてください。

Q.fMSX3DSはOld3DSでも動作しますか？
A.はい。fMSX3DSはOld3DSであっても実機と同じスピードで動作可能です。
しかし、以下のような制限があります。New 3DSなら制限はありません。

・Old2DSでは800ピクセル ワイドモードが使用できません。
　それ以外の本体（Old3DS、New 3DS、New 2DS）では使用できます。

・インターレースをオンにしたときOld3DS/Old2DSでは、はげしくちらつきます。

・FMサウンドをオンにしたときに、Old3DS/Old2DSではスピードが低下してしまいます。

・MSXTurboRが遅いです。New3DSでは実機と同じスピードで動作可能です。

Q.以前動いていたディスクが急に動かなくなりました。どうすれば良い？
A.「FMSX3DS/SAVEDISK」フォルダ("root\FMSX3DS\SAVEDISK")に置かれた同じ名前のディスクファイルを削除してみてください。
　ただし、この場合セーブデータも削除してしまうため、削除する前にバックアップを取ることをおすすめします。

Q.fMSX3DSのメニューの「スクリーンショットを読み込む」って何の意味があるの？
A.これは「スクリーンショットを保存」メニューで保存された画像を表示することができます。
　ゲームのセーブデータのパスワードを管理するときなどに便利です。

Q.fMSX3DSのメニューの「[スクリーンショットを読み込む](キーボードを表示)」って何？
A.これは「スクリーンショットを保存」メニューで保存された画像を表示することができます。
　さらに、それと同時にキーボードを表示できますので、ソフトウェアキーボードを参照画像を見ながら使うことができます。
　ゲームのセーブデータのパスワード（キーボード入力）を管理するときなどに便利です。
　（ガリウスの迷宮や、ドラゴンスレイヤー4、激突ペナントレースなど）
　さらに、マイコンBASICマガジンなど古いパソコン雑誌の画像を参考にしながらプログラミングするさいにも便利です。

Q.fMSX3DSのメニューの「[コナミSCC+ ROMを読み込む]」って何？
A.一部のディスクのゲームは、プレイするにはMSXのスロットにコナミSCC拡張カートリッジを挿入する必要があります。
　（スナッチャー、SDスナッチャー、コナミ　ゲームコレクション、そのほか多くのディスクマガジンや
　音楽ディスクなど）。
　このメニューは仮想的にSCC拡張ロムを挿入し、これらのディスクをプレイすることができるようにします。

Q.[オプション]メニューの「日本語のBIOSを使用する」って何？
A.「MSXJ.ROM」、「MSX2J.ROM」という名前の日本版のBIOSを優先して使用します。
 メタルギアなどの日本のMSXでしか動作しないゲームをするときに便利です。
 また、ゲームを60FPSでプレイしたい際にも便利です。

Q.システムメニューの[ステートを読み込む]が上手く動作しません。
A.ステートを読み込むには、RAMのサイズが保存した時と同じサイズである必要があります。
　オプション項目の「RAM Size」を以前の値に戻してみてください。


<9.製作者について>
fMSX : MSX computer emulator
 http://fms.komkon.org/fMSX/

  Original fMSX                  by Marat Fayzullin (1994-2021).
  fMSX-SDL port                  by Vincent van Dam (2001).
  YM2413/PSG/SCC/Y8950 emulation by Mitsutaka Okazaki (2001-2024).

  3DS port			 by h.tomioka(2023-2024)

  C-BIOS			 by BouKiCHi and many people(2002-2018)
  Pseudo Kanji ROM		 by Ａ ｔｏ Ｃ(1997)
  要町 as MSX-View（フォント）	 by Ａ ｔｏ Ｃ(1997)